)]}'
{"version":3,"file":"/packages/just-i18n.js","sources":["just-i18n/i18n.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,E;AACA,iC;AACA,2C;AACA,E;;AAEA,c;AACA,2B;AACA,kB;AACA,gC;AACA,yB;AACA,wB;;AAEA,E;AACA,iC;AACA,E;AACA,wB;AACA,e;AACA,0C;AACA,qD;AACA,mE;AACA,8H;AACA,Y;AACA,E;;AAEA,E;AACA,4B;AACA,E;AACA,qB;AACA,U;AACA,4C;AACA,qB;AACA,O;AACA,yB;AACA,oD;AACA,qB;AACA,O;AACA,G;AACA,C;;AAEA,E;AACA,U;AACA,E;AACA,kC;AACA,iB;AACA,gB;AACA,E;;AAEA,yC;AACA,wB;AACA,gB;AACA,E;;AAEA,+B;AACA,e;AACA,kB;AACA,E;;AAEA,uC;AACA,gB;AACA,sC;AACA,iC;AACA,Y;AACA,yC;AACA,K;AACA,uB;AACA,U;AACA,yB;AACA,wB;AACA,G;AACA,E;;AAEA,E;AACA,c;AACA,E;AACA,oC;AACA,0C;AACA,wC;AACA,gB;AACA,E;;AAEA,wD;AACA,+B;AACA,iC;AACA,sC;AACA,kC;AACA,sC;AACA,uD;AACA,O;AACA,G;AACA,E","sourcesContent":["/*\n  just-i18n package for Meteor.js\n  author: Hubert OG <hubert@orlikarnia.com>\n*/\n\nvar maps = {};\nvar defaultLanguage = 'en';\nvar language = '';\nvar dep = new Deps.Dependency();\nvar missingTemplate = '';\nvar showMissing = false;\n\n/*\n  Get the value for the given key\n*/\ni18n = function(label) {\n  dep.depend();\n  if(typeof label !== 'string') return '';\n  return (maps[language] && maps[language][label]) ||\n         (maps[defaultLanguage] && maps[defaultLanguage][label]) ||\n         (showMissing && _.template(missingTemplate, {language: language, defaultLanguage: defaultLanguage, label: label})) ||\n         '';\n};\n\n/*\n  Register handlebars helper\n*/\nif(Meteor.isClient) {\n  if(UI) {\n    UI.registerHelper('i18n', function (x) {\n      return i18n(x);\n    });\n  } else if(Handlebars) {\n    Handlebars.registerHelper('i18n', function (x) {\n      return i18n(x);\n    });\n  }\n}\n\n/*\n  Settings\n*/\ni18n.setLanguage = function(lng) {\n  language = lng;\n  dep.changed();\n};\n\ni18n.setDefaultLanguage = function(lng) {\n  defaultLanguage = lng;\n  dep.changed();\n};\n\ni18n.getLanguage = function() {\n  dep.depend();\n  return language;\n};\n\ni18n.showMissing = function(template) {\n  if(template) {\n    if(typeof template === 'string') {\n      missingTemplate = template;\n    } else {\n      missingTemplate = '[<%= label %>]';\n    }\n    showMissing = true;\n  } else {\n    missingTemplate = '';\n    showMissing = false;\n  }\n};\n\n/*\n  Register map\n*/\ni18n.map = function(language, map) {\n  if(!maps[language]) maps[language] = {};\n  registerMap(language, '', false, map);\n  dep.changed();\n};\n\nvar registerMap = function(language, prefix, dot, map) {\n  if(typeof map === 'string') {\n    maps[language][prefix] = map;\n  } else if(typeof map === 'object') {\n    if(dot) prefix = prefix + '.';\n    _.each(map, function(value, key) {\n      registerMap(language, prefix + key, true, value);\n    });\n  }\n};\n\n"]}